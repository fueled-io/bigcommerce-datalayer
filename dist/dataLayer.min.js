!function(){var e=[];window.dataLayer&&(this.dataLayer=window.dataLayer,this.dataLayer.push({ecommerce:null})),function(t){"use strict";t.ready=c,e.push=function(t){if(Array.prototype.push.call(e,t),e&&e.length&&e.length>0){const t=e.length,a=e[t-1];validateDatalayerJson(a,"event"),validateDatalayerJson(a,"ecommerce"),validateDatalayerJson(a,"shopper")}}}(this),e=window.dataLayer;var t,a=window.analyticsData,r=[],o=window.document,n=window.MutationObserver||window.WebKitMutationObserver;function c(e,a){r.push({selector:e,fn:a}),t||(t=new n(i)).observe(o.documentElement,{childList:!0,subtree:!0}),i()}function i(){for(var e,t,a=0,n=r.length;a<n;a++){e=r[a];for(var c,i=0,d=(t=o.querySelectorAll(e.selector)).length;i<d;i++)(c=t[i]).ready||(c.ready=!0,e.fn.call(c,c))}}function d(){return{customer_id:a.userId||"{{customer.email}}",email:a.userId||"{{customer.email}}",externalCustomerId:"{{customer.id}}"}}function s(t){e.push({event:"add_to_cart",ecommerce:{items:[{item_name:"{{product.title}}",item_id:t,price:"{{product.price.without_tax.value}}",item_category:"{{product.category}}",item_variant:"{{product.sku}}"}]},shopper:d()})}c(".body",(function(){var t=document.getElementsByClassName("card-figure__link")||[],a=document.querySelectorAll("[data-button-type='add-cart']")||[],r=document.getElementById("form-action-addToCart"),o=document.getElementsByClassName("cart-remove")||[];t.length>0&&[...t].forEach((t=>t.addEventListener("click",(()=>{var a;a=t.attributes[2].nodeValue,e.push({event:"select_item",ecommerce:{items:[{item_name:a}]},shopper:d()})})))),a.length>0&&a.forEach((e=>e.addEventListener("click",(e=>{var t=e.target.href.indexOf("product_id");s(e.target.href.slice(t).split("=")[1])})))),r&&r.addEventListener("click",(()=>{s("{{product.id}}")})),o.length>0&&o.forEach((t=>t.addEventListener("click",(()=>{var a;a=t.attributes[1].nodeValue,e.push({event:"remove_from_cart",ecommerce:{cart_item_id:a},shopper:d()})}))))})),validateDatalayerJson=()=>({}),document.getElementsByClassName("customerView-body"),window.checkoutConfig&&window.checkoutConfig.checkoutId}();